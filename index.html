
<!doctype html>
<html lang="bn">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>тШн ржмрж╛ржо Meter</title>
  <style>
    :root { --maxw: 900px; --brand:#ef4444; --brand-dark:#7f1d1d; --ink:#111; --muted:#6b7280; }
    body { font-family: system-ui, -apple-system, Segoe UI, Roboto, Noto Sans Bengali, Noto Sans, Arial, sans-serif; line-height: 1.5; margin: 0; background: #fff5f5; color: var(--ink); }
    header { background: linear-gradient(90deg,#7f1d1d,#ef4444); color: #fff; padding: 1.1rem 1.25rem; }
    header h1 { margin: 0; font-size: 1.2rem; }

    main { max-width: var(--maxw); margin: 1rem auto 2rem; background: #fff; padding: 1rem; border-radius: 14px; box-shadow: 0 6px 20px rgba(0,0,0,.06); }

    .controls { display: flex; flex-wrap: wrap; gap: .6rem; align-items:center; }
    button { border: 0; padding: .65rem 1rem; border-radius: 999px; cursor: pointer; background: var(--brand); color: #fff; box-shadow: 0 6px 14px rgba(127,29,29,.25); transition: transform .06s ease, box-shadow .2s ease; }
    button:hover{ transform: translateY(-1px); box-shadow: 0 10px 20px rgba(127,29,29,.25);} 
    button.secondary { background: #fee2e2; color: var(--brand-dark); }
    button.ghost { background: transparent; color: var(--brand-dark); border: 1px solid #fecaca; }
    button[disabled]{ opacity:.5; cursor: not-allowed; }

    fieldset { border: 1px solid #ffe4e6; border-radius: 12px; padding: .9rem; }
    legend { padding: 0 .25rem; font-weight: 700; color:#7f1d1d; }

    .qcard { padding: .75rem; border-radius: 12px; background: #fff1f2; border: 1px solid #ffe4e6; }
    .qindex { font-weight:700; color:#7f1d1d; }
    .qtext { margin: .25rem 0 .75rem; font-weight: 700; }

    .opts { display: grid; grid-template-columns: 1fr; gap: .5rem; }
    .opt { display: flex; align-items: center; gap: .6rem; padding: .55rem .7rem; border: 1px solid #fecaca; border-radius: 10px; background:#fff; }
    .opt input { transform: scale(1.15); }

    .navrow { display:flex; gap:.6rem; justify-content: space-between; margin-top: .8rem; }
    .progress { height: 8px; background:#ffe4e6; border-radius:999px; overflow:hidden; }
    .bar { height:100%; width:0%; background: linear-gradient(90deg,#fb7185,#ef4444); transition: width .25s ease; }

    .result { display:none; }
    .result.show { display:block; }
    .scorebox { background: #fff1f2; border: 1px solid #fecaca; padding: .9rem; border-radius: 12px; }
    .assessment { font-size: 1.1rem; font-weight: 800; color:#7f1d1d; }
    .badge { display: inline-block; padding: .2rem .6rem; border-radius: 999px; font-size: .8rem; border: 1px solid #fecaca; background:#fff; }
    .muted { color: var(--muted); }

    .share { display:flex; gap:.6rem; flex-wrap:wrap; margin-top:.6rem; }

    /* Hides the numeric score line on result screen (mystique mode) */
    .scoreline { display:none !important; }

    /* Print view: render only the result card nicely for PDF */
    @media print {
      header, .legend, .quiz, .share, .navrow, .progress { display:none !important; }
      main { box-shadow:none; }
      .result { display:block !important; }
    }
  </style>
</head>
<body>
  <header>
    <h1>тШн ржмрж╛ржо Meter</h1>
  </header>
  <main>
    <section class="legend">
      <fieldset>
        <legend>ржХрзАржнрж╛ржмрзЗ ржЦрзЗрж▓ржмрзЗржи</legend>
        <p>ржкрзНрж░рждрж┐ржЯрж╛ ржХржерж╛рзЯ ржЖржкржирж┐ ржХрждржЯрж╛ ржПржХржоржд, ржмрж▓рзБржи тАФ</p>
        <ul>
          <li>ЁЯСЙ ржкрзБрж░рзЛржкрзБрж░рж┐ ржПржХржоржд (рзк)</li>
          <li>ЁЯСЙ ржПржХржоржд (рзй)</li>
          <li>ЁЯСЙ ржорждрж╛ржоржд ржирзЗржЗ (рзи)</li>
          <li>ЁЯСЙ ржПржХржоржд ржиржЗ (рзз)</li>
          <li>ЁЯСЙ ржПржХржжржоржЗ ржПржХржоржд ржиржЗ (рзж)</li>
        </ul>
      </fieldset>
    </section>

    <section class="quiz" aria-live="polite">
      <div class="progress" aria-hidden="true"><div id="bar" class="bar"></div></div>
      <div class="qcard" id="qcard">
        <div class="qindex" id="qindex">ржкрзНрж░рж╢рзНржи 1 / 20</div>
        <div class="qtext" id="qtext">тАж</div>
        <div class="opts" id="opts"></div>
        <div class="navrow">
          <button id="prev" class="ghost">ржкрзЗржЫржирзЗ</button>
          <div class="controls">
            <button id="reset" class="secondary">рж░рж┐рж╕рзЗржЯ</button>
            <button id="next">ржкрж░рзЗрж░ ржкрзНрж░рж╢рзНржи</button>
          </div>
        </div>
      </div>
    </section>

    <section id="result" class="result" role="region" aria-label="ржлрж▓рж╛ржлрж▓">
      <div class="scorebox">
        <!-- Hidden numeric score line (kept in DOM for potential future use) -->
        <div class="scoreline" aria-hidden="true">
          <span class="badge">ржорзЛржЯ рж╕рзНржХрзЛрж░</span>
          <span id="score">0</span> / <span id="max">0</span> (<span id="percent">0</span>%)
        </div>

        <div class="assessment">рж╕рж╛рж░рзНржмрж┐ржХ ржорзВрж▓рзНржпрж╛ржпрж╝ржи: <span id="assessment" class="muted">тАФ</span></div>
        <div id="comment" class="muted"></div>
      </div>

      <div class="share">
        <button id="btnPrint" class="secondary">ЁЯз╛ PDF ржбрж╛ржЙржирж▓рзЛржб</button>
        <button id="btnShare" class="ghost">ЁЯФЧ рж╢рзЗржпрж╝рж╛рж░</button>
        <button id="btnCopy" class="ghost">ЁЯУЛ рж▓рж┐ржВржХ ржХржкрж┐</button>
        <button id="btnRestart">ржЖржмрж╛рж░ рж╢рзБрж░рзБ</button>
      </div>
    </section>
  </main>

  <script>
  // Likert options
  const LIKERT_OPTIONS = [
    { label: "ржкрзБрж░рзЛржкрзБрж░рж┐ ржПржХржоржд (рзк)", value: 4 },
    { label: "ржПржХржоржд (рзй)", value: 3 },
    { label: "ржорждрж╛ржоржд ржирзЗржЗ (рзи)", value: 2 },
    { label: "ржПржХржоржд ржиржЗ (рзз)", value: 1 },
    { label: "ржПржХржжржоржЗ ржПржХржоржд ржиржЗ (рзж)", value: 0 }
  ];

  // Questions
  const QUESTIONS = [
    "ржоржирзЗ рж╣рзЯ ржирж╛, ржжрзЗрж╢рзЗрж░ ржЯрж╛ржХрж╛тАУржкрзЯрж╕рж╛ рж╕ржм ржШрзБрж░рзЗржлрж┐рж░рзЗ ржХрж┐ржЫрзБ ржкрж░рж┐ржмрж╛рж░ ржЖрж░ ржжрж▓ржмрж╛ржЬржжрзЗрж░ рж╣рж╛рждрзЗржЗ ржЬржорзЗ ржЖржЫрзЗ?",
    "ржнрзЛржЯ ржорж╛ржирзЗржЗ ржПржЦржи ржорж╛рж╕рзНрждрж╛ржи, ржХрзНржпрж╛ржбрж╛рж░ ржЖрж░ рж╕рж┐ржирзНржбрж┐ржХрзЗржЯрзЗрж░ ржЦрзЗрж▓рж╛ред",
    "ржЧрж╛рж░рзНржорзЗржирзНржЯрж╕рзЗрж░ ржорж╛рж▓рж┐ржХрж░рж╛ ржорзБржирж╛ржлрж╛рзЯ ржоржЬрзЗ, ржЖрж░ рж╢рзНрж░ржорж┐ржХрж░рж╛ ржШрж╛ржо ржЭрж░рж┐рзЯрзЗржУ ржЯрж┐ржХрзЗ ржерж╛ржХрждрзЗ рж▓рзЬрзЗ ржпрж╛ржЪрзНржЫрзЗ тАФ ржПржЯрж╛ржЗ ржмрж╛рж╕рзНрждржм?",
    "рж░рж┐ржХрж╢рж╛ржУрзЯрж╛рж▓рж╛, рж╣ржХрж╛рж░, ржЧрзГрж╣ржХрж░рзНржорзА тАФ ржХрзЗржЙржЗ рж░рж╛рж╖рзНржЯрзНрж░рзЗрж░ ржирж┐рж░рж╛ржкрждрзНрждрж╛ ржкрж╛рзЯ ржирж╛, ржЕржержЪ ржУрж░рж╛ржЗ рж╢рж╣рж░ржЯрж╛ ржЪрж╛рж▓рж┐рзЯрзЗ рж░рж╛ржЦрзЗрз╖",
    "ржХрж░рзНржкрзЛрж░рзЗржЯ рж╣рж╛ржЙржЬ ржпржЦржи рждржЦржи ржПржорзНржкрж▓рзЯрж┐ ржЫрж╛ржЯрж╛ржЗ ржХрж░рзЗ, ржмрзЗрждржи ржжрж┐рждрзЗ ржЧрзЬрж┐ржорж╕рж┐ ржХрж░рзЗ, ржЗржЙржирж┐рзЯржи ржХрж░рждрзЗ ржжрзЗрзЯ ржирж╛- ржПржЧрзБрж▓рзЛ ржЕржирзНржпрж╛рзЯред",
    "ржорзБржХрзНрждрж┐ржпрзБржжрзНржз рж╣рзЯрзЗржЫрж┐рж▓ рж╢рзЛрж╖ржгржорзБржХрзНрждрж┐рж░ ржЬржирзНржп тАФ ржХрж┐ржирзНрждрзБ ржЖржЬржУ ржзржирзАржжрзЗрж░ рж░рж╛ржЬрждрзНржм ржЪрж▓ржЫрзЗ ржПржмржВ ржХрзЛржирзЛ рж╕рж░ржХрж╛рж░ржЗ ржП ржмрж┐рж╖рзЯрзЗ ржХрж╛ржЬ ржХрж░рзЗ ржирж╛ред",
    "ржмрж┐рж╢рзНржмржмрзНржпрж╛ржВржХ ржЖрж░ ржЖржЗржПржоржПржл ржЖржорж╛ржжрзЗрж░ ржжрзЗрж╢рзЗ ржЛржг ржжрзЗрзЯ, ржХрж┐ржирзНрждрзБ рждрж╛ржжрзЗрж░ рж╢рж░рзНрждрзЗ ржЖржорж░рж╛ рж╣рж╛ржмрзБржбрзБржмрзБ ржЦрж╛ржЗ тАФ ржПржоржиржЯрж╛ржЗ ржоржирзЗ рж╣рзЯ?",
    "рж╕рзНржХрзБрж▓рзЗ ржнрж╛рж▓рзЛ рж╢рж┐ржХрзНрж╖ржХ ржирзЗржЗ, ржмржЗрзЯрзЗрж░ ржорж╛ржи ржЦрж╛рж░рж╛ржк тАФ ржХрж╛рж░ржг ржмрж┐ржжрзЗрж╢рж┐ ржжрж╛рждрж╛рж░рж╛ рж╕рж░ржХрж╛рж░ржХрзЗ ржЦрж░ржЪ ржХржорж╛рждрзЗ ржмрж▓рзЗред",
    "рж╣рж╛рж╕ржкрж╛рждрж╛рж▓ ржПржЦржи ржмрзНржпржмрж╕рж╛; ржЧрж░рж┐ржм ржорж╛ржирзБрж╖ рж╢рзБржзрзБ рж▓рж╛ржЗржирзЗ ржжрж╛ржБрзЬрж┐рзЯрзЗржЗ ржХрж╖рзНржЯ ржкрж╛рзЯред",
    "ржлрж┐рж▓рж┐рж╕рзНрждрж┐ржи ржирж┐рзЯрзЗ ржЗрж╕рж▓рж╛ржорзА ржжрж▓ржЧрзБрж▓рзЛ ржпржд ржХржерж╛ ржмрж▓рзЗ, ржХрж╛ржЬрзЗрж░ рж╕ржорзЯ рждрждржЯрж╛ ржжрзЗржЦрж╛ ржпрж╛рзЯ ржирж╛ред",
    "ржЧрзНрж░рж╛ржорзЗ ржПржЦржирзЛ ржЫрзЛржЯ ржнрзВржорж┐рж╣рзАржи ржХрзГрж╖ржХрж░рж╛ ржмрзЬ ржЬржорж┐рж░ ржорж╛рж▓рж┐ржХ ржЖрж░ ржорж╣рж╛ржЬржиржжрзЗрж░ рж╣рж╛рждрзЗ ржмрж┐ржкржжрзЗ ржкрзЬрзЗред",
    "ржЖржорж╛ржжрзЗрж░ ржиржжрзА ржерзЗржХрзЗ ржмрж╛ржгрж┐ржЬрзНржп тАФ ржЕржирзЗржХ рж╕рж┐ржжрзНржзрж╛ржирзНрждржЗ ржирж┐рждрзЗ рж╣рзЯ ржкрж╛рж╢рзЗрж░ ржмрзЬ ржжрзЗрж╢рзЗрж░ ржЪрж╛ржкрзЗред",
    "ржпрж╛рж░рж╛ ржПржХрж╛рждрзНрждрж░рзЗ ржЕржкрж░рж╛ржз ржХрж░рзЗржЫрж┐рж▓, ржЖржЬ рждрж╛рж░рж╛ рж╕ржорзНржорж╛ржирж┐ржд рж╣рзЯрзЗ ржШрзБрж░рзЗ ржмрзЗрзЬрж╛рзЯ тАФ ржПржЯрж╛ ржнрзАрж╖ржг ржХрж╖рзНржЯржжрж╛рзЯржХред",
    "ржмрзЗрж╕рж░ржХрж╛рж░рж┐ржХрж░ржгрзЗрж░ ржирж╛ржорзЗ рж╕рж░ржХрж╛рж░рж┐ рж╕ржорзНржкржж (ржпрзЗржоржи- ржмржирзНржжрж░, ржЦржирж┐ржЬ рж╕ржорзНржкржж) ржмрж┐ржжрзЗрж╢рж┐ ржХрзЛржорзНржкрж╛ржирж┐ржжрзЗрж░ ржХрж╛ржЫрзЗ ржмрзЗржЪрзЗ ржжрзЗржУрзЯрж╛ ржорж╛ржирзЗ, ржЖрж╕рж▓рзЗ ржжрзЗрж╢ржЯрж╛ржЗ ржмрж┐ржХрзНрж░рж┐ рж╣ржЪрзНржЫрзЗред",
    "ржирж╛рж░рзА ржЖрж░ ржЖржжрж┐ржмрж╛рж╕рзАржжрзЗрж░ ржкрзНрж░рждрж┐ ржмрзИрж╖ржорзНржп рж╢рзБржзрзБ рж╕ржВрж╕рзНржХрзГрждрж┐рж░ ржирзЯ, ржПржЯрж┐ ржЕрж░рзНржержирзИрждрж┐ржХ рж╢рзЛрж╖ржгрзЗрж░ржУ ржПржХржЯрж┐ ржЕржВрж╢ред",
    "рж░рж╛рж╖рзНржЯрзНрж░рзЗрж░ ржХрзЛржирзЛ ржзрж░рзНржо ржерж╛ржХрж╛ ржЙржЪрж┐ржд ржирж╛ тАФ рж╕ржмрж╛ржЗржХрзЗ рж╕ржорж╛ржиржнрж╛ржмрзЗ ржжрзЗржЦрждрзЗ рж╣ржмрзЗред",
    "ржврж╛ржХрж╛рзЯ ржирждрзБржи ржирждрзБржи рж░рж╛рж╕рзНрждрж╛ржШрж╛ржЯ ржмрж╛ржирж╛ржирзЛ рж╣рзЯ, ржХрж┐ржирзНрждрзБ ржЧрзНрж░рж╛ржорзЗ ржорж╛ржирзБрж╖ рж╣рж╛ржБржЯрж╛рж░ рж░рж╛рж╕рзНрждрж╛ржЗ ржкрж╛рзЯ ржирж╛ тАФ ржПржЗ ржмрзИрж╖ржорзНржпржЯрж╛ ржЕржирзНржпрж╛рзЯ ржирж╛?",
    "ржирж╛рж░рзА, ржЖржжрж┐ржмрж╛рж╕рзА, ржмрж╛ ржнрж┐ржирзНржи рж▓рж┐ржЩрзНржЧрзЗрж░ ржорж╛ржирзБрж╖рзЗрж░ ржЕржзрж┐ржХрж╛рж░ ржирж┐рзЯрзЗ ржХржерж╛ ржмрж▓рж╛ ржмрж┐рж▓рж╛рж╕рж┐рждрж╛ ржирзЯ тАФ ржПржЯрж╛ ржирзНржпрж╛ржпрзНржп ржжрж╛ржмрж┐ред",
    "рж╕ржм ржмрзЬ ржжрж▓ржЗ ржзржирзАржжрзЗрж░ ржкржХрзНрж╖рзЗ ржЦрзЗрж▓рзЗ; ржЧрж░рж┐ржмрзЗрж░ ржжрж▓рзЗ ржХрзЗржЙ ржирзЗржЗред",
    "ржжрзЗрж╢ржЯрж╛ рж╕рждрзНржпрж┐ржХрж╛рж░рзЗрж░ ржмржжрж▓рж╛рждрзЗ рж╣рж▓рзЗ ржХрзНрж╖ржорждрж╛, ржЬржорж┐ ржЖрж░ ржХрж╛рж░ржЦрж╛ржирж╛ рж╕рж╛ржзрж╛рж░ржг ржорж╛ржирзБрж╖рзЗрж░ рж╣рж╛рждрзЗ ржЖрж╕рждрзЗ рж╣ржмрзЗ тАФ ржиржЗрж▓рзЗ ржХрж┐ржЫрзБржЗ рж╣ржмрзЗ ржирж╛!"
  ];

  const RUBRIC = [
    { min: 81, label: "ржПржХржжржо рж▓рж╛рж▓ ржЪрж┐ржирзНрждрж╛!", comment: "рж░рж╛рж╖рзНржЯрзНрж░, ржмрж╛ржЬрж╛рж░, рж╢рзЛрж╖ржгтАФ рж╕ржмржХрж┐ржЫрзБрждрзЗ рж░рж┐рж╕рзЗржЯ ржЪрж╛ржЗред ЁЯФе ржмрж┐ржкрзНрж▓ржм рж╕рзНржкржирзНржжрж┐ржд ржмрзБржХрзЗтАФ ржоржирзЗ рж╣рзЯ ржЖржорж┐ржЗ рж▓рзЗржирж┐ржи!" },
    { min: 71, label: "ржЦрзБржм ржмрж╛ржоржкржирзНржерзА", comment: "ржЧрзЛрзЬрж╛ ржмржжрж▓рзЗрж░ ржкржХрзНрж╖рзЗ; рж╕ржВржЧржаржи ржУ ржХрзМрж╢рж▓ ржЬрзЛрж░ржжрж╛рж░ ржХрж░рзБржиред" },
    { min: 51, label: "ржмрж╛ржоржкржирзНржерзА", comment: "рж╕рж┐рж╕рзНржЯрзЗржорж┐ржХ ржкрж░рж┐ржмрж░рзНрждржи ржмрж┐рж╢рзНржмрж╛рж╕ ржХрж░рзЗржи; ржмрж╛рж╕рзНрждржм рж░рзЛржбржорзНржпрж╛ржк рж╕рж╛ржЬрж╛ржиред" },
    { min: 26, label: "ржкрзНрж░ржЧрждрж┐рж╢рзАрж▓", comment: "ржЕржирзНржпрж╛рзЯ ржжрзЗржЦрж▓рзЗ ржЕрж╕рзНржмрж╕рзНрждрж┐ рж╣рзЯ; ржмрзНржпржмрж╕рзНржерж╛рж░ ржнрзЗрждрж░рзЗржЗ рж╕ржорж╛ржзрж╛ржи ржЦрзЛржБржЬрзЗржиред" },
    { min: 0,  label: "ржорзВрж▓ржзрж╛рж░рж╛рж░", comment: "ржкрж░рж┐ржмрж░рзНрждржи ржЪрж╛ржи, ржХрж┐ржирзНрждрзБ ржкрзБрж░рзЛ ржЦрзЗрж▓рж╛ржЯрж╛ ржирзЗрзЬрзЗ ржжрзЗржЦрж╛рж░ ржкржХрзНрж╖рзЗ ржиржиред" }
  ];

  // Elements
  const qindexEl = document.getElementById('qindex');
  const qtextEl  = document.getElementById('qtext');
  const optsEl   = document.getElementById('opts');
  const barEl    = document.getElementById('bar');
  const prevBtn  = document.getElementById('prev');
  const nextBtn  = document.getElementById('next');
  const resetBtn = document.getElementById('reset');

  const resultSec= document.getElementById('result');
  const scoreEl  = document.getElementById('score');
  const maxEl    = document.getElementById('max');
  const percentEl= document.getElementById('percent');
  const assessEl = document.getElementById('assessment');
  const commentEl= document.getElementById('comment');

  const btnPrint = document.getElementById('btnPrint');
  const btnShare = document.getElementById('btnShare');
  const btnCopy  = document.getElementById('btnCopy');
  const btnRestart= document.getElementById('btnRestart');

  // State
  let i = 0; // current index
  const answers = Array(QUESTIONS.length).fill(null); // store selected values

  function escapeHtml(s){ return String(s).replace(/[&<>"]/g, c => ({'&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;'}[c])); }

  function getMaxScore(){
    const maxPerQ = Math.max(...LIKERT_OPTIONS.map(o=>o.value));
    return QUESTIONS.length * maxPerQ;
  }

  function calculateScore(){
    const total = answers.reduce((s,v)=> s + (Number.isFinite(v)? v:0), 0);
    const max = getMaxScore();
    const pct = Math.round(total/max*100);
    const band = RUBRIC.find(r => pct >= r.min) || RUBRIC[RUBRIC.length-1];
    return {total,max,pct,band};
  }

  function showResult(){
    const {total,max,pct,band} = calculateScore();

    // keep internal metrics updated (hidden in UI)
    scoreEl.textContent = total;
    maxEl.textContent = max;
    percentEl.textContent = pct;

    // show only assessment & comment
    assessEl.textContent = band.label;
    commentEl.textContent = band.comment;

    document.querySelector('.quiz').style.display='none';
    resultSec.classList.add('show');

    // tiny celebratory effect
    if (pct >= 81) {
      for (let k=0;k<20;k++) {
        const s = document.createElement('div'); s.textContent='ЁЯФе';
        Object.assign(s.style,{position:'fixed',left:Math.random()*100+'vw',top:'-2vh',fontSize:(16+Math.random()*16)+'px',transition:'transform 1.2s ease, opacity 1.2s', zIndex:9999});
        document.body.appendChild(s);
        requestAnimationFrame(()=>{ s.style.transform=`translateY(${90+Math.random()*10}vh) rotate(${(Math.random()*360)|0}deg)`; s.style.opacity=0.1; });
        setTimeout(()=>s.remove(),1500);
      }
    }
  }

  function renderQuestion(){
    qindexEl.textContent = `ржкрзНрж░рж╢рзНржи ${i+1} / ${QUESTIONS.length}`;
    qtextEl.textContent = QUESTIONS[i];
    optsEl.innerHTML = LIKERT_OPTIONS.map((opt,idx)=>{
      const id = `q${i}_o${idx}`;
      const checked = answers[i]===opt.value ? 'checked' : '';
      return `<label class="opt" for="${id}"><input type="radio" id="${id}" name="q${i}" value="${opt.value}" ${checked}> <span>${escapeHtml(opt.label)}</span></label>`
    }).join('');

    // progress
    barEl.style.width = `${(i)/QUESTIONS.length*100}%`;

    prevBtn.disabled = i===0;
    nextBtn.textContent = (i===QUESTIONS.length-1) ? 'ржлрж▓рж╛ржлрж▓ ржжрзЗржЦрзБржи' : 'ржкрж░рзЗрж░ ржкрзНрж░рж╢рзНржи';
  }

  // Event wires
  optsEl.addEventListener('change', (e)=>{
    if (e.target && e.target.name===`q${i}`) {
      answers[i] = Number(e.target.value);
    }
  });

  nextBtn.addEventListener('click', ()=>{
    if (!Number.isFinite(answers[i])) { alert('ржПржХржЯрж┐ ржЕржкрж╢ржи ржмрж╛ржЫрж╛ржЗ ржХрж░рзБржиред'); return; }
    if (i < QUESTIONS.length - 1) {
      i++;
      renderQuestion();
    } else {
      // last question: ensure all answered, else jump to first missing
      const missingIndex = answers.findIndex(v=>!Number.isFinite(v));
      if (missingIndex === -1) {
        showResult();
      } else {
        alert('рж╕ржм ржкрзНрж░рж╢рзНржирзЗрж░ ржЙрждрзНрждрж░ ржжрж┐ржиред');
        i = missingIndex; renderQuestion();
      }
    }
  });

  prevBtn.addEventListener('click', ()=>{
    i = Math.max(i-1, 0);
    renderQuestion();
  });

  resetBtn.addEventListener('click', ()=>{
    for (let k=0;k<answers.length;k++) answers[k]=null;
    i=0; renderQuestion();
  });

  btnRestart.addEventListener('click', ()=>{
    window.location.reload();
  });

  // Share buttons
  btnCopy.addEventListener('click', async ()=>{
    try { await navigator.clipboard.writeText(location.href); btnCopy.textContent='тЬЕ ржХржкрж┐ рж╣ржпрж╝рзЗржЫрзЗ'; setTimeout(()=>btnCopy.textContent='ЁЯУЛ рж▓рж┐ржВржХ ржХржкрж┐',1200);} catch(_){ alert('ржХржкрж┐ ржХрж░рж╛ ржЧрзЗрж▓ ржирж╛'); }
  });

  btnShare.addEventListener('click', ()=>{
    const { band } = calculateScore();
    // mystique share text: no numeric score
    const text = `ржЖржорж╛рж░ ржмрж╛ржо Meter ржлрж▓рж╛ржлрж▓ тАФ ${band.label}`;
    const shareUrl = `https://www.facebook.com/sharer/sharer.php?u=${encodeURIComponent(location.href)}&quote=${encodeURIComponent(text)}`;
    window.open(shareUrl, '_blank');
  });

  // Print to PDF
  btnPrint.addEventListener('click', ()=>{ window.print(); });

  // Boot
  (function init(){
    document.getElementById('max').textContent = getMaxScore();
    renderQuestion();
  })();
  </script>
</body>
</html>

